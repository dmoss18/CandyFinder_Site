<% content_for :javascript_includes do %>
  <%= javascript_include_tag "google_places_data.js" %>
<% end %>

<p id="notice"><%= notice %></p>

<!-- ko if: hasLocation -->
<div>Name: <span data-bind="html: location().name"></span></div>
<div>Address: <span data-bind="html: location().full_address"></span></div>
<div>Zip: <span data-bind="html: location().zip"></span></div>
<div>Phone: <span data-bind="html: location().international_phone"></span></div>
<div>Google id: <span data-bind="html: location().google_id"></span></div>
<div>Google reference: <span data-bind="html: location().reference"></span></div>
<div>Google url: <span data-bind="html: location().google_url"></span></div>
<!-- /ko -->

<div>
  <div>Filter by name: <input type="text" data-bind="value: locFilter" />&nbsp;<button data-bind="click: getFilteredResults">Go</button></div>
  <div><input type="hidden" id="locId" value="<%= params[:id] %>" /></div>
</div>

<!-- ko if: places().length == 0 -->
  <span>Zero results found</span>
<!-- /ko -->
<!-- ko if: places().length > 0 -->
 <table>
  <tr>
   <th>Name</th>
   <th>Vicinity</th>
   <th></th>
  </tr>
  <!-- ko foreach: places -->  
    <tr>
      <td data-bind="html: name" ></td>
      <td data-bind="html: vicinity" ></td>
      <td><button data-bind="click: submitPlace">Select</button></td>
    </tr>
  <!-- /ko -->
 </table>
<!-- /ko -->
